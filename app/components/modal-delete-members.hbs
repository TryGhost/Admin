<header class="modal-header" data-test-modal="delete-members">
    <h1>{{t "Manual.Components.Delete_selected_members"}}</h1>
</header>
<a class="close" href="" role="button" title="Close" {{action "closeModal"}}>{{svg-jar "close"}}<span class="hidden">{{t "Manual.Components.Close"}}</span></a>

{{#if (not this.confirmed)}}
    <div class="modal-body" data-test-state="delete-unconfirmed">
        <p>
            {{t "Manual.Components.You're_about_to_delete"}}
            <strong data-test-text="delete-count">{{gh-pluralize this.model.memberCount "member"}}</strong>.
            {{t "Manual.Components.This_is_permanent!_All_Ghost_data_will_be_deleted,_this_will_have_no_effect_on_subscriptions_in_Stripe"}}
        </p>
        <p>
            {{t "Manual.Components.A_backup_of_your_selection_will_be_automatically_downloaded_to_your_device_before_deletion"}}
        </p>
    </div>
{{else}}
    <div class="gh-content-box pa" data-test-state="delete-complete">
        {{#if this.error}}
            <div class="flex items-center">
                {{svg-jar "warning" class="w4 h4 fill-red mr2 nudge-top--3"}}
                <div>
                    <p class="ma0 pa0">
                        <span class="fw5" data-test-text="delete-error">{{this.error}}</span>
                    </p>
                </div>
            </div>
        {{else}}
            <div class="flex items-center">
                {{svg-jar "check-circle" class="w4 h4 stroke-green mr2"}}
                <p class="ma0 pa0">
                    <span class="fw6" data-test-text="deleted-count">{{gh-pluralize this.response.stats.successful "member"}}</span>
                    {{t "Manual.Components.successfully_deleted"}}
                </p>
            </div>
            {{#if this.response.stats.unsuccessful}}
                <div class="flex items-start mt2" data-test-bulk-delete-errors>
                    {{svg-jar "warning" class="w4 h4 fill-red mr2 nudge-top--3"}}
                    <div>
                        <p class="ma0 pa0">
                            <span class="fw5" data-test-text="invalid-count">{{gh-pluralize this.response.stats.unsuccessful "member"}}</span>
                            {{t "Manual.Components.failed_to_delete"}}
                        </p>
                    </div>
                </div>
            {{/if}}
        {{/if}}
    </div>
{{/if}}

<div class="modal-footer">
    {{#if (not this.confirmed)}}
        <button {{action "closeModal"}} class="gh-btn" data-test-button="cancel">
            <span>{{t "Manual.Components.Cancel"}}</span>
        </button>

        <GhTaskButton
            @buttonText="Download backup & delete members"
            @successText="Deleted"
            @task={{this.deleteMembersTask}}
            @class="gh-btn gh-btn-red gh-btn-icon"
            data-test-button="confirm"
        />
    {{else}}
        <button {{action "closeModal"}} class="gh-btn gh-btn-black" data-test-button="close-modal">
            <span>{{t "Manual.Components.Close"}}</span>
        </button>
    {{/if}}
</div>