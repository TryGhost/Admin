<GhBasicDropdown @verticalPosition="below" @horizontalPosition="right" @onClose={{this.onDropdownClose}} as |dd|>

    <dd.Trigger
        class="gh-btn gh-btn-icon gh-btn-action-icon"
        data-test-button="members-filter-actions"
    >
        <span class="{{if @isFiltered "gh-btn-label-green"}}">
            {{svg-jar "filter"}}
            {{t "Manual.Others.Filter"}}
            {{#if @isFiltered}}
            ({{totalFilters}})
            {{/if}}
        </span>
    </dd.Trigger>

    <dd.Content class="gh-member-actions-menu gh-filter-builder gh-members-filter-builder dropdown-menu dropdown-triangle-top-right">
        <h3>{{t "Manual.Others.Filter_list"}}</h3>
        <section class="gh-filters">
            {{#each this.filters as |filter|}}
                <div class="gh-filter-block">
                    <GhFormGroup @property={{filter.id}} @classNames="max-width">
                        <div class="gh-filter-inputgroup">
                            <span class="gh-select">
                                <OneWaySelect
                                    @value={{filter.type}}
                                    @options={{this.availableFilterProperties}}
                                    @optionValuePath="name"
                                    @optionLabelPath="label"
                                    @optionTargetPath="name"
                                    @groupLabelPath="group"
                                    @update={{fn this.setFilterType filter.id}}
                                />
                                {{svg-jar "arrow-down-small"}}
                            </span>
                            <span class="gh-select">
                                <OneWaySelect
                                    @value={{filter.relation}}
                                    @options={{filter.relationOptions}}
                                    @optionValuePath="name"
                                    @optionLabelPath="label"
                                    @optionTargetPath="name"
                                    @update={{fn this.setFilterRelation filter.id}}
                                />
                                {{svg-jar "arrow-down-small"}}
                            </span>
                            <GhMembersFilterValueLabs
                                @filter={{filter}}
                                @setFilterValue={{this.setFilterValue}}
                                @onLabelEdit={{@onLabelEdit}}
                            />
                            <button
                                type="button"
                                class="gh-btn gh-btn-text gh-btn-link gh-btn-icon gh-delete-filter"
                                title="Delete filter"
                                {{on "click" (fn this.deleteFilter filter.id)}}
                            >
                                {{svg-jar "close"}} <span class="hidden">{{t "Manual.Others.Delete_filter"}}</span>
                            </button>
                        </div>
                    </GhFormGroup>
                </div>
            {{/each}}
            <div>
                <button type="button"
                    class="gh-btn gh-btn-text gh-btn-link green gh-btn-icon gh-add-filter"
                    {{on "click" this.addFilter}}
                >
                    <span>{{svg-jar "add"}} {{t "Manual.Others.Add_filter"}}</span>
                </button>
            </div>
        </section>
        <div class="gh-filter-builder-footer">
            <button
                class="gh-btn"
                {{on "click" this.resetFilter}}
            >
                <span>{{t "Manual.Others.Reset_all"}}</span>
            </button>
            <button
                class="gh-btn gh-btn-primary"
                data-test-button="members-apply-filter"
                {{on "click" this.applyFilter}}
            >
                <span>{{t "Manual.Others.Apply_filters"}}</span>
            </button>
        </div>
    </dd.Content>

</GhBasicDropdown>
